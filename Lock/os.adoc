== Lock in OS
[%hardbreaks]

Spin-Lock

- 임계 영역에 들어가지 못할 경우 들어갈 때 까지 계속 반복하는 구조
- 반복할 때 Context Switch가 일어나지 않는다면 꽤나 효율적이다
- 하지만 이것도 완전한 해결방법은 아니다
- 오히려 문제점이 될 수가 있음

Deadlock(교착 상태)

- 두 개 이상의 작업이 서로 상대방의 작업이 끝나기만을 기다리고 있기 때문에 결과적으로 아무것도 완료되지 못하는 상태를 가리킨다
- 앞서 말한 Spin-lock 거의 무한정 반복되는 현상이 지속되면 Deadlock 상태가 된다
- 사실 이 문제를 해결하는 완벽한 방법이 아직 없다

Deadlock

- Deadlock이 발생하는 4가지 조건
1. Mutual Exclusion
2. Circular wait
3. Hold and wait
4. No preemption

Mutual Exclusion(상호 배제)

- 동시 프로그래밍에서 공유 불가능한 자원의 동시 사용을 피하기 위해 사용되는 알고리즘
- 임계 구역(critical section)으로 불리는 코드 영역에 의해 구현
- 해결:여러 개의 프로세스가 공유 자원을 사용할 수 있도록 한다

Circular Wait(순환 대기)

- 프로세스와 자원들의 요청, 할당관계가 원형을 이루는 경우
- 해결: 자원에 고유한 번호를 할당하고, 번호 순서대로 자원을 요구하도록
한다.

Hold and Wait(점유 대기)

- 프로세스나 쓰레드 한 자원을 가지고 있으면서 다른 자원을 요구하는 경우
- 자기가 속한 임계영역 말고도 다른 임계영역의 조건까지 요구하는 경우에
발생
- 해결:프로세스가 실행되기 전 필요한 모든 자원을 할당한다.

No preemption(비선점)

- 프로세스나 쓰레드에게 자원이 할당되면, 그것을 모두 사용하기 전까지 절대로 뺏을 수 없는 경우에 일어난다
- 이렇게 되면, 다른 임계 영역으로 들어가려는 또 다른 쓰레드가 deadlock
에 걸리게 됨
- 해결: 자원을 점유하고 있는 프로세스가 다른 자원을 요구할 때 점유하고
있는 자원을 반납하고 , 요구한 자원을 사용하기 위해 기다리게 한다.
